<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ”ç©¶æ¨¡å¼ - æ£’çƒ OVR è¨ˆç®—å™¨</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .research-header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            margin-bottom: 30px;
        }
        
        .research-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .research-header p {
            font-size: 1.1em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .research-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .analysis-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .analysis-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
            font-weight: 400;
        }
        
        .analysis-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .research-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
        }
        
        .research-button.primary {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
        }
        
        .research-button.secondary {
            background: linear-gradient(135deg, #666, #555);
        }
        
        .research-button.gold {
            background: linear-gradient(135deg, #d4af37, #b8941f);
        }
        
        .research-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 25px;
            text-decoration: none;
            color: #2c3e50;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            background: white;
            transform: translateY(-2px);
        }
        
        .coming-soon {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            border: 2px dashed #90EE90;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            color: #2d5a2d;
        }
        
        .coming-soon h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .coming-soon p {
            font-size: 1em;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .analysis-buttons {
                flex-direction: column;
            }
            
            .research-button {
                width: 100%;
            }
            
            .research-header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">â† è¿”å›ä¸»é </a>
    
    <div class="research-header">
        <h1>ğŸ”¬ ç ”ç©¶æ¨¡å¼</h1>
        <p>æ·±åº¦æ•¸æ“šåˆ†æèˆ‡æ¨¡å‹æ¢ç´¢å·¥å…· - åƒ…ä¾›ç ”ç©¶é–‹ç™¼ä½¿ç”¨</p>
    </div>
    
    <div class="research-container">
        <div class="analysis-section">
            <h2>ğŸ“Š POW æ¨¡å‹åˆ†æå ±å‘Š</h2>
            <p style="margin-bottom: 20px; color: #666;">
                å›ºå®š HIT å’Œ EYE æ•¸å€¼ï¼Œåˆ†æ POW å±¬æ€§åœ¨ä¸åŒçµ„åˆä¸‹çš„è¡¨ç¾æ¨¡å¼ã€‚
                ç”¨æ–¼é©—è­‰æ¨¡å‹çš„ç™¾åˆ†ä½é»æ•¸ç³»çµ±å’Œå±¬æ€§å½±éŸ¿éšå±¤ã€‚
            </p>
            
            <div class="analysis-buttons">
                <button class="research-button primary" onclick="analyzePOWModel()">
                    ğŸ¯ æ¨™æº–åˆ†æ (HIT70/EYE70)
                </button>
                <button class="research-button secondary" onclick="analyzePOWModelPR1()">
                    ğŸ“‰ åº•ç·šåˆ†æ (HIT40/EYE40-PR1)
                </button>
                <button class="research-button gold" onclick="analyzePOWModelPR99()">
                    ğŸ“ˆ é ‚ç·šåˆ†æ (HIT99/EYE99-PR99)
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 13px; color: #666;">
                <strong>ä½¿ç”¨èªªæ˜ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>æ¨™æº–åˆ†æï¼šæ¸¬è©¦ POW åœ¨å¹³å‡ MLB æŠ€èƒ½ä¸‹çš„è¡¨ç¾</li>
                    <li>åº•ç·šåˆ†æï¼šé©—è­‰åŸºæœ¬åŠŸä¸è¶³æ™‚çš„é•·æ‰“åŠ›ä¸Šé™</li>
                    <li>é ‚ç·šåˆ†æï¼šé©—è­‰é ‚ç´šåŸºæœ¬åŠŸå°é•·æ‰“åŠ›çš„æ”¾å¤§æ•ˆæ‡‰</li>
                </ul>
            </div>
        </div>
        
        <div class="analysis-section">
            <h2>ğŸ¯ HIT æ¨¡å‹åˆ†æå ±å‘Š</h2>
            <p style="margin-bottom: 20px; color: #666;">
                å›ºå®š POW å’Œ EYE æ•¸å€¼ï¼Œåˆ†æ HIT å±¬æ€§åœ¨ä¸åŒçµ„åˆä¸‹çš„è¡¨ç¾æ¨¡å¼ã€‚
                ç”¨æ–¼é©—è­‰æ‰“æ“Šç‡(BA)åŸºæº–å€¼å’Œæ¥è§¸æŠ€è¡“å½±éŸ¿éšå±¤ã€‚
            </p>
            
            <div class="analysis-buttons">
                <button class="research-button primary" onclick="analyzeHITModel()">
                    ğŸ¯ æ¨™æº–åˆ†æ (POW70/EYE70)
                </button>
                <button class="research-button secondary" onclick="analyzeHITModelPR1()">
                    ğŸ“‰ åº•ç·šåˆ†æ (POW40/EYE40-PR1)
                </button>
                <button class="research-button gold" onclick="analyzeHITModelPR99()">
                    ğŸ“ˆ é ‚ç·šåˆ†æ (POW99/EYE99-PR99)
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 13px; color: #666;">
                <strong>ä½¿ç”¨èªªæ˜ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>æ¨™æº–åˆ†æï¼šæ¸¬è©¦ HIT åœ¨å¹³å‡ MLB æŠ€èƒ½ä¸‹çš„ BA è¡¨ç¾</li>
                    <li>åº•ç·šåˆ†æï¼šé©—è­‰åŸºæœ¬é•·æ‰“åŠ›å’Œé¸çƒä¸‹çš„æ¥è§¸èƒ½åŠ›</li>
                    <li>é ‚ç·šåˆ†æï¼šé©—è­‰é ‚ç´šç’°å¢ƒä¸‹çš„æ¥è§¸æŠ€è¡“æ•ˆæœ</li>
                </ul>
            </div>
        </div>
        
        <div class="analysis-section">
            <h2>ğŸ‘ï¸ EYE æ¨¡å‹åˆ†æå ±å‘Š</h2>
            <p style="margin-bottom: 20px; color: #666;">
                å›ºå®š POW å’Œ HIT æ•¸å€¼ï¼Œåˆ†æ EYE å±¬æ€§åœ¨ä¸åŒçµ„åˆä¸‹çš„è¡¨ç¾æ¨¡å¼ã€‚
                ç”¨æ–¼é©—è­‰ä¸Šå£˜ç‡(OBP)åŸºæº–å€¼å’Œé¸çƒçœ¼å½±éŸ¿éšå±¤ã€‚
            </p>
            
            <div class="analysis-buttons">
                <button class="research-button primary" onclick="analyzeEYEModel()">
                    ğŸ‘ï¸ æ¨™æº–åˆ†æ (POW70/HIT70)
                </button>
                <button class="research-button secondary" onclick="analyzeEYEModelPR1()">
                    ğŸ“‰ åº•ç·šåˆ†æ (POW40/HIT40-PR1)
                </button>
                <button class="research-button gold" onclick="analyzeEYEModelPR99()">
                    ğŸ“ˆ é ‚ç·šåˆ†æ (POW99/HIT99-PR99)
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 13px; color: #666;">
                <strong>ä½¿ç”¨èªªæ˜ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>æ¨™æº–åˆ†æï¼šæ¸¬è©¦ EYE åœ¨å¹³å‡ MLB æŠ€èƒ½ä¸‹çš„ OBP è¡¨ç¾</li>
                    <li>åº•ç·šåˆ†æï¼šé©—è­‰åŸºæœ¬æŠ€èƒ½ä¸‹çš„é¸çƒçœ¼æ•ˆæœ</li>
                    <li>é ‚ç·šåˆ†æï¼šé©—è­‰é ‚ç´šæŠ€èƒ½ç’°å¢ƒä¸‹çš„é¸çƒèƒ½åŠ›æ”¾å¤§</li>
                </ul>
            </div>
        </div>
        
        <div class="analysis-section">
            <h2>ğŸ”„ é›™å‘è½‰æ›æº–ç¢ºæ€§æ¸¬è©¦</h2>
            <p style="margin-bottom: 20px; color: #666;">
                æ¸¬è©¦å±¬æ€§â†”æ•¸æ“šé›™å‘è½‰æ›çš„æº–ç¢ºæ€§ï¼Œé©—è­‰å„ç¨®å±¬æ€§çµ„åˆ(40/70/99)çš„è½‰æ›ä¸€è‡´æ€§ã€‚
                é€™æ˜¯ç¢ºä¿æ•´å€‹æ¨¡å‹åŸºç¤ç©©å®šæ€§çš„é—œéµæ¸¬è©¦ã€‚
            </p>
            
            <div class="analysis-buttons">
                <button class="research-button primary" onclick="window.open('bidirectional_fixed.html', '_blank')">
                    ğŸ”„ é›™å‘è½‰æ›æ¸¬è©¦ (ä¿®å¾©ç‰ˆ)
                </button>
                <button class="research-button secondary" onclick="window.open('test_debug.html', '_blank')">
                    ğŸ”§ æ¨¡çµ„è¼‰å…¥èª¿è©¦
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 13px; color: #666;">
                <strong>æ¸¬è©¦å…§å®¹ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>å…¨40/70/99æ¨™æº–å±¬æ€§çµ„åˆ</li>
                    <li>æ··åˆå±¬æ€§çµ„åˆ(å¦‚40/70/99)</li>
                    <li>å…¨æ˜æ˜Ÿ/MVPç­‰ç´šæ¸¬è©¦</li>
                    <li>å®Œæ•´ç³»çµ±æº–ç¢ºæ€§è©•ä¼°</li>
                </ul>
            </div>
        </div>
        
        <div class="analysis-section">
            <h2>ğŸ¯ å¤§è°·ç¿”å¹³2024æ ¡æº–åˆ†æ</h2>
            <p style="margin-bottom: 20px; color: #666;">
                åŸºæ–¼å¤§è°·ç¿”å¹³2024çœŸå¯¦æ•¸æ“š(.310/.390/.646)é€²è¡Œæ¨¡å‹æ ¡æº–åˆ†æï¼Œ
                æª¢é©—v2.2ç‰ˆæœ¬çš„åŸºæº–å€¼å’ŒBABIPæ›²ç·šèª¿æ•´æ•ˆæœã€‚
            </p>
            
            <div class="analysis-buttons">
                <button class="research-button primary" onclick="window.open('ohtani_simple.html', '_blank')">
                    ğŸ”¬ å¤§è°·æ ¡æº–åˆ†æ
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 13px; color: #666;">
                <strong>åˆ†æå…§å®¹ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>è½‰æ›å…¬å¼æº–ç¢ºæ€§æ¸¬è©¦</li>
                    <li>åŸºæº–å€¼èª¿æ•´æ•ˆæœå°æ¯”</li>
                    <li>BABIPæ›²ç·šæ ¡æº–é©—è­‰</li>
                    <li>æ•´é«”æ ¡æº–æ•ˆæœè©•ä¼°</li>
                </ul>
            </div>
        </div>
        
        <div class="analysis-section coming-soon">
            <h3>ğŸš€ æœªä¾†åŠŸèƒ½</h3>
            <p>å³å°‡æ–°å¢æ›´å¤šç ”ç©¶å·¥å…·ï¼šå±¬æ€§ç›¸é—œæ€§åˆ†æã€æ­·å²æ•¸æ“šæ¯”å°ã€æ¨¡å‹æ ¡æº–å·¥å…·ã€çµ±è¨ˆåˆ†ä½ˆè¦–è¦ºåŒ–ç­‰åŠŸèƒ½</p>
        </div>
    </div>

    <!-- è¼‰å…¥æ ¸å¿ƒ JavaScript æ¨¡çµ„ -->
    <script src="constants.js"></script>
    <script src="probability_model.js"></script>
    <script src="simulation_engine.js"></script>
    
    <script>
        // å¾ä¸»é é¢è¤‡è£½ OVR è¨ˆç®—å‡½æ•¸
        function calculateBatterOVR(pow, hit, eye) {
            // ç°¡åŒ–ç‰ˆ OVR è¨ˆç®— - å¯¦éš›æ‡‰è©²å¾ä¸»é é¢å°å…¥
            const powWeight = 0.35;
            const hitWeight = 0.40;
            const eyeWeight = 0.25;
            
            return Math.round(powWeight * pow + hitWeight * hit + eyeWeight * eye);
        }
        
        // POWåˆ†æå‡½æ•¸ - æ¨™æº–ç‰ˆ (HIT=70, EYE=70)
        function analyzePOWModel() {
            console.log("ğŸ”¬ ç ”ç©¶æ¨¡å¼ï¼šPOWæ¨¡å‹åˆ†æé–‹å§‹ - æ¨™æº–ç‰ˆ (HIT=70, EYE=70)");
            
            const fixedHIT = 70;
            const fixedEYE = 70;
            const results = [];
            
            for (let pow = 40; pow <= 150; pow += 5) {
                const stats = simulatePlayerStats(pow, fixedHIT, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(pow, fixedHIT, fixedEYE);
                
                results.push({
                    POW: pow,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3),
                    OPS: stats.OPS.toFixed(3),
                    HR: Math.round(stats.HR_count || 0),
                    '2B': Math.round(stats.doubles_count || 0),
                    'XBH': Math.round((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0)),
                    'HR/XBH': stats.HR_count && (stats.doubles_count || stats.triples_count) ? 
                        ((stats.HR_count / ((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0))) * 100).toFixed(1) + '%' : 
                        '100.0%',
                    BB: Math.round(stats.BB_rate * 600),
                    SO: Math.round(stats.K_rate * 600)
                });
            }
            
            console.table(results);
            displayPOWAnalysisResults(results, 'ğŸ¯ POWæ¨¡å‹åˆ†æ - æ¨™æº–ç‰ˆ (HIT=70, EYE=70)');
            return results;
        }

        // POWåˆ†æå‡½æ•¸ - PR1ç‰ˆ (HIT=40, EYE=40)
        function analyzePOWModelPR1() {
            console.log("ğŸ”¬ ç ”ç©¶æ¨¡å¼ï¼šPOWæ¨¡å‹åˆ†æé–‹å§‹ - PR1ç‰ˆ (HIT=40, EYE=40)");
            
            const fixedHIT = 40;
            const fixedEYE = 40;
            const results = [];
            
            for (let pow = 40; pow <= 150; pow += 5) {
                const stats = simulatePlayerStats(pow, fixedHIT, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(pow, fixedHIT, fixedEYE);
                
                results.push({
                    POW: pow,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3),
                    OPS: stats.OPS.toFixed(3),
                    HR: Math.round(stats.HR_count || 0),
                    '2B': Math.round(stats.doubles_count || 0),
                    'XBH': Math.round((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0)),
                    'HR/XBH': stats.HR_count && (stats.doubles_count || stats.triples_count) ? 
                        ((stats.HR_count / ((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0))) * 100).toFixed(1) + '%' : 
                        '100.0%',
                    BB: Math.round(stats.BB_rate * 600),
                    SO: Math.round(stats.K_rate * 600)
                });
            }
            
            console.table(results);
            displayPOWAnalysisResults(results, 'ğŸ“‰ POWæ¨¡å‹åˆ†æ - PR1ç‰ˆ (HIT=40, EYE=40)');
            return results;
        }

        // POWåˆ†æå‡½æ•¸ - PR99ç‰ˆ (HIT=99, EYE=99)
        function analyzePOWModelPR99() {
            console.log("ğŸ”¬ ç ”ç©¶æ¨¡å¼ï¼šPOWæ¨¡å‹åˆ†æé–‹å§‹ - PR99ç‰ˆ (HIT=99, EYE=99)");
            
            const fixedHIT = 99;
            const fixedEYE = 99;
            const results = [];
            
            for (let pow = 40; pow <= 150; pow += 5) {
                const stats = simulatePlayerStats(pow, fixedHIT, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(pow, fixedHIT, fixedEYE);
                
                results.push({
                    POW: pow,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3),
                    OPS: stats.OPS.toFixed(3),
                    HR: Math.round(stats.HR_count || 0),
                    '2B': Math.round(stats.doubles_count || 0),
                    'XBH': Math.round((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0)),
                    'HR/XBH': stats.HR_count && (stats.doubles_count || stats.triples_count) ? 
                        ((stats.HR_count / ((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0))) * 100).toFixed(1) + '%' : 
                        '100.0%',
                    BB: Math.round(stats.BB_rate * 600),
                    SO: Math.round(stats.K_rate * 600)
                });
            }
            
            console.table(results);
            displayPOWAnalysisResults(results, 'ğŸ“ˆ POWæ¨¡å‹åˆ†æ - PR99ç‰ˆ (HIT=99, EYE=99)');
            return results;
        }
        
        // é¡¯ç¤ºPOWåˆ†æçµæœ
        function displayPOWAnalysisResults(results, title) {
            let resultDiv = document.getElementById('powAnalysisResults');
            if (!resultDiv) {
                resultDiv = document.createElement('div');
                resultDiv.id = 'powAnalysisResults';
                resultDiv.style.cssText = `
                    position: fixed;
                    top: 5%;
                    left: 5%;
                    right: 5%;
                    bottom: 5%;
                    background: white;
                    border: 2px solid #333;
                    border-radius: 15px;
                    padding: 25px;
                    overflow: auto;
                    z-index: 3000;
                    font-family: 'Segoe UI', sans-serif;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                `;
                document.body.appendChild(resultDiv);
            }
            
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 15px;">
                    <h2 style="color: #2c3e50; margin: 0;">${title}</h2>
                    <button onclick="closePOWAnalysis()" style="background: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 500;">é—œé–‰å ±å‘Š</button>
                </div>
                <table border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 10px;">POW</th><th>OVR</th><th>BA</th><th>SLG</th><th>OPS</th><th>HR</th><th>2B</th><th>XBH</th><th>HR/XBH</th><th>BB</th><th>SO</th>
                    </tr>
            `;
            
            results.forEach(row => {
                const powClass = row.POW >= 110 ? 'style="background: #f39c12; color: white;"' : 
                                row.POW >= 99 ? 'style="background: #e67e22; color: white;"' : 
                                row.POW <= 40 ? 'style="background: #bdc3c7;"' : '';
                html += `
                    <tr ${powClass}>
                        <td style="text-align: center; font-weight: bold;">${row.POW}</td>
                        <td style="text-align: center;">${row.OVR}</td>
                        <td style="text-align: center;">${row.BA}</td>
                        <td style="text-align: center;">${row.SLG}</td>
                        <td style="text-align: center;">${row.OPS}</td>
                        <td style="text-align: center; font-weight: bold;">${row.HR}</td>
                        <td style="text-align: center;">${row['2B']}</td>
                        <td style="text-align: center;">${row.XBH}</td>
                        <td style="text-align: center; font-weight: bold;">${row['HR/XBH']}</td>
                        <td style="text-align: center;">${row.BB}</td>
                        <td style="text-align: center;">${row.SO}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            html += '<div style="margin-top: 15px; padding: 10px; background: #ecf0f1; border-radius: 5px; font-size: 11px; color: #7f8c8d;">ç ”ç©¶æ¨¡å¼æ•¸æ“šåƒ…ä¾›é–‹ç™¼èª¿è©¦ä½¿ç”¨ï¼Œä¸ä»£è¡¨æœ€çµ‚éŠæˆ²è¡¨ç¾</div>';
            resultDiv.innerHTML = html;
        }
        
        // é—œé–‰POWåˆ†æçµæœ
        function closePOWAnalysis() {
            const resultDiv = document.getElementById('powAnalysisResults');
            if (resultDiv) {
                resultDiv.remove();
            }
        }

        // HITåˆ†æå‡½æ•¸ - æ¨™æº–ç‰ˆ (POW=70, EYE=70)
        function analyzeHITModel() {
            console.log("ğŸ¯ ç ”ç©¶æ¨¡å¼ï¼šHITæ¨¡å‹åˆ†æé–‹å§‹ - æ¨™æº–ç‰ˆ (POW=70, EYE=70)");
            
            const fixedPOW = 70;
            const fixedEYE = 70;
            const results = [];
            
            for (let hit = 40; hit <= 150; hit += 5) {
                const stats = simulatePlayerStats(fixedPOW, hit, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(fixedPOW, hit, fixedEYE);
                
                results.push({
                    HIT: hit,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    BABIP: (stats.BABIP || 0).toFixed(3),
                    OBP: stats.OBP.toFixed(3),
                    'K%': (stats.K_rate * 100).toFixed(1) + '%',
                    'BB%': (stats.BB_rate * 100).toFixed(1) + '%',
                    'å®‰æ‰“': Math.round(stats.H_count || 0),
                    'ä¸‰æŒ¯': Math.round(stats.K_count || 0),
                    'ä¿é€': Math.round(stats.BB_count || 0)
                });
            }
            
            console.table(results);
            displayHITAnalysisResults(results, 'ğŸ¯ HITæ¨¡å‹åˆ†æ - æ¨™æº–ç‰ˆ (POW=70, EYE=70)');
            return results;
        }

        // HITåˆ†æå‡½æ•¸ - PR1ç‰ˆ (POW=40, EYE=40)
        function analyzeHITModelPR1() {
            console.log("ğŸ¯ ç ”ç©¶æ¨¡å¼ï¼šHITæ¨¡å‹åˆ†æé–‹å§‹ - PR1ç‰ˆ (POW=40, EYE=40)");
            
            const fixedPOW = 40;
            const fixedEYE = 40;
            const results = [];
            
            for (let hit = 40; hit <= 150; hit += 5) {
                const stats = simulatePlayerStats(fixedPOW, hit, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(fixedPOW, hit, fixedEYE);
                
                results.push({
                    HIT: hit,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    BABIP: (stats.BABIP || 0).toFixed(3),
                    OBP: stats.OBP.toFixed(3),
                    'K%': (stats.K_rate * 100).toFixed(1) + '%',
                    'BB%': (stats.BB_rate * 100).toFixed(1) + '%',
                    'å®‰æ‰“': Math.round(stats.H_count || 0),
                    'ä¸‰æŒ¯': Math.round(stats.K_count || 0),
                    'ä¿é€': Math.round(stats.BB_count || 0)
                });
            }
            
            console.table(results);
            displayHITAnalysisResults(results, 'ğŸ“‰ HITæ¨¡å‹åˆ†æ - PR1ç‰ˆ (POW=40, EYE=40)');
            return results;
        }

        // HITåˆ†æå‡½æ•¸ - PR99ç‰ˆ (POW=99, EYE=99)
        function analyzeHITModelPR99() {
            console.log("ğŸ¯ ç ”ç©¶æ¨¡å¼ï¼šHITæ¨¡å‹åˆ†æé–‹å§‹ - PR99ç‰ˆ (POW=99, EYE=99)");
            
            const fixedPOW = 99;
            const fixedEYE = 99;
            const results = [];
            
            for (let hit = 40; hit <= 150; hit += 5) {
                const stats = simulatePlayerStats(fixedPOW, hit, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(fixedPOW, hit, fixedEYE);
                
                results.push({
                    HIT: hit,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    BABIP: (stats.BABIP || 0).toFixed(3),
                    OBP: stats.OBP.toFixed(3),
                    'K%': (stats.K_rate * 100).toFixed(1) + '%',
                    'BB%': (stats.BB_rate * 100).toFixed(1) + '%',
                    'å®‰æ‰“': Math.round(stats.H_count || 0),
                    'ä¸‰æŒ¯': Math.round(stats.K_count || 0),
                    'ä¿é€': Math.round(stats.BB_count || 0)
                });
            }
            
            console.table(results);
            displayHITAnalysisResults(results, 'ğŸ“ˆ HITæ¨¡å‹åˆ†æ - PR99ç‰ˆ (POW=99, EYE=99)');
            return results;
        }

        // EYEåˆ†æå‡½æ•¸ - æ¨™æº–ç‰ˆ (POW=70, HIT=70)
        function analyzeEYEModel() {
            console.log("ğŸ‘ï¸ ç ”ç©¶æ¨¡å¼ï¼šEYEæ¨¡å‹åˆ†æé–‹å§‹ - æ¨™æº–ç‰ˆ (POW=70, HIT=70)");
            
            const fixedPOW = 70;
            const fixedHIT = 70;
            const results = [];
            
            for (let eye = 40; eye <= 150; eye += 5) {
                const stats = simulatePlayerStats(fixedPOW, fixedHIT, eye, 1000, 600);
                const ovr = calculateBatterOVR(fixedPOW, fixedHIT, eye);
                const bbCount = Math.round(stats.BB_count || 0);
                const kCount = Math.round(stats.K_count || 0);
                
                results.push({
                    EYE: eye,
                    OVR: Math.round(ovr),
                    OBP: stats.OBP.toFixed(3),
                    'BB%': (stats.BB_rate * 100).toFixed(1) + '%',
                    'K%': (stats.K_rate * 100).toFixed(1) + '%',
                    'BB/K': bbCount > 0 && kCount > 0 ? (bbCount/kCount).toFixed(2) : '0.00',
                    'ä¿é€': bbCount,
                    'ä¸‰æŒ¯': kCount,
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3)
                });
            }
            
            console.table(results);
            displayEYEAnalysisResults(results, 'ğŸ‘ï¸ EYEæ¨¡å‹åˆ†æ - æ¨™æº–ç‰ˆ (POW=70, HIT=70)');
            return results;
        }

        // EYEåˆ†æå‡½æ•¸ - PR1ç‰ˆ (POW=40, HIT=40)
        function analyzeEYEModelPR1() {
            console.log("ğŸ‘ï¸ ç ”ç©¶æ¨¡å¼ï¼šEYEæ¨¡å‹åˆ†æé–‹å§‹ - PR1ç‰ˆ (POW=40, HIT=40)");
            
            const fixedPOW = 40;
            const fixedHIT = 40;
            const results = [];
            
            for (let eye = 40; eye <= 150; eye += 5) {
                const stats = simulatePlayerStats(fixedPOW, fixedHIT, eye, 1000, 600);
                const ovr = calculateBatterOVR(fixedPOW, fixedHIT, eye);
                const bbCount = Math.round(stats.BB_count || 0);
                const kCount = Math.round(stats.K_count || 0);
                
                results.push({
                    EYE: eye,
                    OVR: Math.round(ovr),
                    OBP: stats.OBP.toFixed(3),
                    'BB%': (stats.BB_rate * 100).toFixed(1) + '%',
                    'K%': (stats.K_rate * 100).toFixed(1) + '%',
                    'BB/K': bbCount > 0 && kCount > 0 ? (bbCount/kCount).toFixed(2) : '0.00',
                    'ä¿é€': bbCount,
                    'ä¸‰æŒ¯': kCount,
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3)
                });
            }
            
            console.table(results);
            displayEYEAnalysisResults(results, 'ğŸ“‰ EYEæ¨¡å‹åˆ†æ - PR1ç‰ˆ (POW=40, HIT=40)');
            return results;
        }

        // EYEåˆ†æå‡½æ•¸ - PR99ç‰ˆ (POW=99, HIT=99)
        function analyzeEYEModelPR99() {
            console.log("ğŸ‘ï¸ ç ”ç©¶æ¨¡å¼ï¼šEYEæ¨¡å‹åˆ†æé–‹å§‹ - PR99ç‰ˆ (POW=99, HIT=99)");
            
            const fixedPOW = 99;
            const fixedHIT = 99;
            const results = [];
            
            for (let eye = 40; eye <= 150; eye += 5) {
                const stats = simulatePlayerStats(fixedPOW, fixedHIT, eye, 1000, 600);
                const ovr = calculateBatterOVR(fixedPOW, fixedHIT, eye);
                const bbCount = Math.round(stats.BB_count || 0);
                const kCount = Math.round(stats.K_count || 0);
                
                results.push({
                    EYE: eye,
                    OVR: Math.round(ovr),
                    OBP: stats.OBP.toFixed(3),
                    'BB%': (stats.BB_rate * 100).toFixed(1) + '%',
                    'K%': (stats.K_rate * 100).toFixed(1) + '%',
                    'BB/K': bbCount > 0 && kCount > 0 ? (bbCount/kCount).toFixed(2) : '0.00',
                    'ä¿é€': bbCount,
                    'ä¸‰æŒ¯': kCount,
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3)
                });
            }
            
            console.table(results);
            displayEYEAnalysisResults(results, 'ğŸ“ˆ EYEæ¨¡å‹åˆ†æ - PR99ç‰ˆ (POW=99, HIT=99)');
            return results;
        }

        // é¡¯ç¤ºHITåˆ†æçµæœ
        function displayHITAnalysisResults(results, title) {
            const existingDiv = document.getElementById('hitAnalysisResults');
            if (existingDiv) {
                existingDiv.remove();
            }
            
            const resultDiv = document.createElement('div');
            resultDiv.id = 'hitAnalysisResults';
            resultDiv.style.cssText = `
                position: fixed;
                top: 5%;
                left: 5%;
                right: 5%;
                bottom: 5%;
                background: white;
                border: 2px solid #27ae60;
                border-radius: 15px;
                padding: 25px;
                overflow: auto;
                z-index: 3000;
                font-family: 'Segoe UI', sans-serif;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            document.body.appendChild(resultDiv);
            
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 15px;">
                    <h2 style="color: #27ae60; margin: 0;">${title}</h2>
                    <button onclick="closeHITAnalysis()" style="background: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 500;">é—œé–‰å ±å‘Š</button>
                </div>
                <table border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 10px;">HIT</th><th>OVR</th><th>BA</th><th>BABIP</th><th>OBP</th><th>K%</th><th>BB%</th><th>å®‰æ‰“</th><th>ä¸‰æŒ¯</th><th>ä¿é€</th>
                    </tr>
            `;
            
            results.forEach(row => {
                const hitClass = (row.HIT === 40 || row.HIT === 70 || row.HIT === 99) ? 
                    'style="background: #f39c12; font-weight: bold;"' : '';
                html += `
                    <tr ${hitClass}>
                        <td style="text-align: center; font-weight: bold; padding: 8px;">${row.HIT}</td>
                        <td style="text-align: center; padding: 8px;">${row.OVR}</td>
                        <td style="text-align: center; padding: 8px;">${row.BA}</td>
                        <td style="text-align: center; padding: 8px;">${row.BABIP}</td>
                        <td style="text-align: center; padding: 8px;">${row.OBP}</td>
                        <td style="text-align: center; padding: 8px;">${row['K%']}</td>
                        <td style="text-align: center; padding: 8px;">${row['BB%']}</td>
                        <td style="text-align: center; padding: 8px;">${row['å®‰æ‰“']}</td>
                        <td style="text-align: center; padding: 8px;">${row['ä¸‰æŒ¯']}</td>
                        <td style="text-align: center; padding: 8px;">${row['ä¿é€']}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            html += '<div style="margin-top: 15px; padding: 10px; background: #ecf0f1; border-radius: 5px; font-size: 11px; color: #7f8c8d;">ç ”ç©¶æ¨¡å¼æ•¸æ“šåƒ…ä¾›é–‹ç™¼èª¿è©¦ä½¿ç”¨ï¼Œä¸ä»£è¡¨æœ€çµ‚éŠæˆ²è¡¨ç¾</div>';
            resultDiv.innerHTML = html;
        }

        // é¡¯ç¤ºEYEåˆ†æçµæœ
        function displayEYEAnalysisResults(results, title) {
            const existingDiv = document.getElementById('eyeAnalysisResults');
            if (existingDiv) {
                existingDiv.remove();
            }
            
            const resultDiv = document.createElement('div');
            resultDiv.id = 'eyeAnalysisResults';
            resultDiv.style.cssText = `
                position: fixed;
                top: 5%;
                left: 5%;
                right: 5%;
                bottom: 5%;
                background: white;
                border: 2px solid #9b59b6;
                border-radius: 15px;
                padding: 25px;
                overflow: auto;
                z-index: 3000;
                font-family: 'Segoe UI', sans-serif;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            document.body.appendChild(resultDiv);
            
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 15px;">
                    <h2 style="color: #9b59b6; margin: 0;">${title}</h2>
                    <button onclick="closeEYEAnalysis()" style="background: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 500;">é—œé–‰å ±å‘Š</button>
                </div>
                <table border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 10px;">EYE</th><th>OVR</th><th>OBP</th><th>BB%</th><th>K%</th><th>BB/K</th><th>ä¿é€</th><th>ä¸‰æŒ¯</th><th>BA</th><th>SLG</th>
                    </tr>
            `;
            
            results.forEach(row => {
                const eyeClass = (row.EYE === 40 || row.EYE === 70 || row.EYE === 99) ? 
                    'style="background: #f39c12; font-weight: bold;"' : '';
                html += `
                    <tr ${eyeClass}>
                        <td style="text-align: center; font-weight: bold; padding: 8px;">${row.EYE}</td>
                        <td style="text-align: center; padding: 8px;">${row.OVR}</td>
                        <td style="text-align: center; padding: 8px;">${row.OBP}</td>
                        <td style="text-align: center; padding: 8px;">${row['BB%']}</td>
                        <td style="text-align: center; padding: 8px;">${row['K%']}</td>
                        <td style="text-align: center; padding: 8px;">${row['BB/K']}</td>
                        <td style="text-align: center; padding: 8px;">${row['ä¿é€']}</td>
                        <td style="text-align: center; padding: 8px;">${row['ä¸‰æŒ¯']}</td>
                        <td style="text-align: center; padding: 8px;">${row.BA}</td>
                        <td style="text-align: center; padding: 8px;">${row.SLG}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            html += '<div style="margin-top: 15px; padding: 10px; background: #ecf0f1; border-radius: 5px; font-size: 11px; color: #7f8c8d;">ç ”ç©¶æ¨¡å¼æ•¸æ“šåƒ…ä¾›é–‹ç™¼èª¿è©¦ä½¿ç”¨ï¼Œä¸ä»£è¡¨æœ€çµ‚éŠæˆ²è¡¨ç¾</div>';
            resultDiv.innerHTML = html;
        }

        // é—œé–‰HITåˆ†æçµæœ
        function closeHITAnalysis() {
            const resultDiv = document.getElementById('hitAnalysisResults');
            if (resultDiv) {
                resultDiv.remove();
            }
        }

        // é—œé–‰EYEåˆ†æçµæœ
        function closeEYEAnalysis() {
            const resultDiv = document.getElementById('eyeAnalysisResults');
            if (resultDiv) {
                resultDiv.remove();
            }
        }
    </script>
</body>
</html>