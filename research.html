<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç ”ç©¶æ¨¡å¼ - æ£’çƒ OVR è¨ˆç®—å™¨</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .research-header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            margin-bottom: 30px;
        }
        
        .research-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .research-header p {
            font-size: 1.1em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .research-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .analysis-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .analysis-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5em;
            font-weight: 400;
        }
        
        .analysis-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .research-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            color: white;
        }
        
        .research-button.primary {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
        }
        
        .research-button.secondary {
            background: linear-gradient(135deg, #666, #555);
        }
        
        .research-button.gold {
            background: linear-gradient(135deg, #d4af37, #b8941f);
        }
        
        .research-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 15px;
            border-radius: 25px;
            text-decoration: none;
            color: #2c3e50;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .back-link:hover {
            background: white;
            transform: translateY(-2px);
        }
        
        .coming-soon {
            background: linear-gradient(135deg, #e8f5e8, #f0f8f0);
            border: 2px dashed #90EE90;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            color: #2d5a2d;
        }
        
        .coming-soon h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .coming-soon p {
            font-size: 1em;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .analysis-buttons {
                flex-direction: column;
            }
            
            .research-button {
                width: 100%;
            }
            
            .research-header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-link">â† è¿”å›ä¸»é </a>
    
    <div class="research-header">
        <h1>ğŸ”¬ ç ”ç©¶æ¨¡å¼</h1>
        <p>æ·±åº¦æ•¸æ“šåˆ†æèˆ‡æ¨¡å‹æ¢ç´¢å·¥å…· - åƒ…ä¾›ç ”ç©¶é–‹ç™¼ä½¿ç”¨</p>
    </div>
    
    <div class="research-container">
        <div class="analysis-section">
            <h2>ğŸ“Š POW æ¨¡å‹åˆ†æå ±å‘Š</h2>
            <p style="margin-bottom: 20px; color: #666;">
                å›ºå®š HIT å’Œ EYE æ•¸å€¼ï¼Œåˆ†æ POW å±¬æ€§åœ¨ä¸åŒçµ„åˆä¸‹çš„è¡¨ç¾æ¨¡å¼ã€‚
                ç”¨æ–¼é©—è­‰æ¨¡å‹çš„ç™¾åˆ†ä½é»æ•¸ç³»çµ±å’Œå±¬æ€§å½±éŸ¿éšå±¤ã€‚
            </p>
            
            <div class="analysis-buttons">
                <button class="research-button primary" onclick="analyzePOWModel()">
                    ğŸ¯ æ¨™æº–åˆ†æ (HIT70/EYE70)
                </button>
                <button class="research-button secondary" onclick="analyzePOWModelPR1()">
                    ğŸ“‰ åº•ç·šåˆ†æ (HIT40/EYE40-PR1)
                </button>
                <button class="research-button gold" onclick="analyzePOWModelPR99()">
                    ğŸ“ˆ é ‚ç·šåˆ†æ (HIT99/EYE99-PR99)
                </button>
            </div>
            
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-size: 13px; color: #666;">
                <strong>ä½¿ç”¨èªªæ˜ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>æ¨™æº–åˆ†æï¼šæ¸¬è©¦ POW åœ¨å¹³å‡ MLB æŠ€èƒ½ä¸‹çš„è¡¨ç¾</li>
                    <li>åº•ç·šåˆ†æï¼šé©—è­‰åŸºæœ¬åŠŸä¸è¶³æ™‚çš„é•·æ‰“åŠ›ä¸Šé™</li>
                    <li>é ‚ç·šåˆ†æï¼šé©—è­‰é ‚ç´šåŸºæœ¬åŠŸå°é•·æ‰“åŠ›çš„æ”¾å¤§æ•ˆæ‡‰</li>
                </ul>
            </div>
        </div>
        
        <div class="analysis-section coming-soon">
            <h3>ğŸš€ æœªä¾†åŠŸèƒ½</h3>
            <p>å³å°‡æ–°å¢æ›´å¤šç ”ç©¶å·¥å…·ï¼šå±¬æ€§ç›¸é—œæ€§åˆ†æã€æ­·å²æ•¸æ“šæ¯”å°ã€æ¨¡å‹æ ¡æº–å·¥å…·ã€çµ±è¨ˆåˆ†ä½ˆè¦–è¦ºåŒ–ç­‰åŠŸèƒ½</p>
        </div>
    </div>

    <!-- è¼‰å…¥æ ¸å¿ƒ JavaScript æ¨¡çµ„ -->
    <script src="constants.js"></script>
    <script src="probability_model.js"></script>
    <script src="simulation_engine.js"></script>
    
    <script>
        // å¾ä¸»é é¢è¤‡è£½ OVR è¨ˆç®—å‡½æ•¸
        function calculateBatterOVR(pow, hit, eye) {
            // ç°¡åŒ–ç‰ˆ OVR è¨ˆç®— - å¯¦éš›æ‡‰è©²å¾ä¸»é é¢å°å…¥
            const powWeight = 0.35;
            const hitWeight = 0.40;
            const eyeWeight = 0.25;
            
            return Math.round(powWeight * pow + hitWeight * hit + eyeWeight * eye);
        }
        
        // POWåˆ†æå‡½æ•¸ - æ¨™æº–ç‰ˆ (HIT=70, EYE=70)
        function analyzePOWModel() {
            console.log("ğŸ”¬ ç ”ç©¶æ¨¡å¼ï¼šPOWæ¨¡å‹åˆ†æé–‹å§‹ - æ¨™æº–ç‰ˆ (HIT=70, EYE=70)");
            
            const fixedHIT = 70;
            const fixedEYE = 70;
            const results = [];
            
            for (let pow = 40; pow <= 150; pow += 5) {
                const stats = simulatePlayerStats(pow, fixedHIT, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(pow, fixedHIT, fixedEYE);
                
                results.push({
                    POW: pow,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3),
                    OPS: stats.OPS.toFixed(3),
                    HR: Math.round(stats.HR_count || 0),
                    '2B': Math.round(stats.doubles_count || 0),
                    'XBH': Math.round((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0)),
                    'HR/XBH': stats.HR_count && (stats.doubles_count || stats.triples_count) ? 
                        ((stats.HR_count / ((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0))) * 100).toFixed(1) + '%' : 
                        '100.0%',
                    BB: Math.round(stats.BB_rate * 600),
                    SO: Math.round(stats.K_rate * 600)
                });
            }
            
            console.table(results);
            displayPOWAnalysisResults(results, 'ğŸ¯ POWæ¨¡å‹åˆ†æ - æ¨™æº–ç‰ˆ (HIT=70, EYE=70)');
            return results;
        }

        // POWåˆ†æå‡½æ•¸ - PR1ç‰ˆ (HIT=40, EYE=40)
        function analyzePOWModelPR1() {
            console.log("ğŸ”¬ ç ”ç©¶æ¨¡å¼ï¼šPOWæ¨¡å‹åˆ†æé–‹å§‹ - PR1ç‰ˆ (HIT=40, EYE=40)");
            
            const fixedHIT = 40;
            const fixedEYE = 40;
            const results = [];
            
            for (let pow = 40; pow <= 150; pow += 5) {
                const stats = simulatePlayerStats(pow, fixedHIT, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(pow, fixedHIT, fixedEYE);
                
                results.push({
                    POW: pow,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3),
                    OPS: stats.OPS.toFixed(3),
                    HR: Math.round(stats.HR_count || 0),
                    '2B': Math.round(stats.doubles_count || 0),
                    'XBH': Math.round((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0)),
                    'HR/XBH': stats.HR_count && (stats.doubles_count || stats.triples_count) ? 
                        ((stats.HR_count / ((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0))) * 100).toFixed(1) + '%' : 
                        '100.0%',
                    BB: Math.round(stats.BB_rate * 600),
                    SO: Math.round(stats.K_rate * 600)
                });
            }
            
            console.table(results);
            displayPOWAnalysisResults(results, 'ğŸ“‰ POWæ¨¡å‹åˆ†æ - PR1ç‰ˆ (HIT=40, EYE=40)');
            return results;
        }

        // POWåˆ†æå‡½æ•¸ - PR99ç‰ˆ (HIT=99, EYE=99)
        function analyzePOWModelPR99() {
            console.log("ğŸ”¬ ç ”ç©¶æ¨¡å¼ï¼šPOWæ¨¡å‹åˆ†æé–‹å§‹ - PR99ç‰ˆ (HIT=99, EYE=99)");
            
            const fixedHIT = 99;
            const fixedEYE = 99;
            const results = [];
            
            for (let pow = 40; pow <= 150; pow += 5) {
                const stats = simulatePlayerStats(pow, fixedHIT, fixedEYE, 1000, 600);
                const ovr = calculateBatterOVR(pow, fixedHIT, fixedEYE);
                
                results.push({
                    POW: pow,
                    OVR: Math.round(ovr),
                    BA: stats.BA.toFixed(3),
                    SLG: stats.SLG.toFixed(3),
                    OPS: stats.OPS.toFixed(3),
                    HR: Math.round(stats.HR_count || 0),
                    '2B': Math.round(stats.doubles_count || 0),
                    'XBH': Math.round((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0)),
                    'HR/XBH': stats.HR_count && (stats.doubles_count || stats.triples_count) ? 
                        ((stats.HR_count / ((stats.HR_count || 0) + (stats.doubles_count || 0) + (stats.triples_count || 0))) * 100).toFixed(1) + '%' : 
                        '100.0%',
                    BB: Math.round(stats.BB_rate * 600),
                    SO: Math.round(stats.K_rate * 600)
                });
            }
            
            console.table(results);
            displayPOWAnalysisResults(results, 'ğŸ“ˆ POWæ¨¡å‹åˆ†æ - PR99ç‰ˆ (HIT=99, EYE=99)');
            return results;
        }
        
        // é¡¯ç¤ºPOWåˆ†æçµæœ
        function displayPOWAnalysisResults(results, title) {
            let resultDiv = document.getElementById('powAnalysisResults');
            if (!resultDiv) {
                resultDiv = document.createElement('div');
                resultDiv.id = 'powAnalysisResults';
                resultDiv.style.cssText = `
                    position: fixed;
                    top: 5%;
                    left: 5%;
                    right: 5%;
                    bottom: 5%;
                    background: white;
                    border: 2px solid #333;
                    border-radius: 15px;
                    padding: 25px;
                    overflow: auto;
                    z-index: 3000;
                    font-family: 'Segoe UI', sans-serif;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                `;
                document.body.appendChild(resultDiv);
            }
            
            let html = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 15px;">
                    <h2 style="color: #2c3e50; margin: 0;">${title}</h2>
                    <button onclick="closePOWAnalysis()" style="background: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 500;">é—œé–‰å ±å‘Š</button>
                </div>
                <table border="1" cellpadding="8" cellspacing="0" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                    <tr style="background: #34495e; color: white;">
                        <th style="padding: 10px;">POW</th><th>OVR</th><th>BA</th><th>SLG</th><th>OPS</th><th>HR</th><th>2B</th><th>XBH</th><th>HR/XBH</th><th>BB</th><th>SO</th>
                    </tr>
            `;
            
            results.forEach(row => {
                const powClass = row.POW >= 110 ? 'style="background: #f39c12; color: white;"' : 
                                row.POW >= 99 ? 'style="background: #e67e22; color: white;"' : 
                                row.POW <= 40 ? 'style="background: #bdc3c7;"' : '';
                html += `
                    <tr ${powClass}>
                        <td style="text-align: center; font-weight: bold;">${row.POW}</td>
                        <td style="text-align: center;">${row.OVR}</td>
                        <td style="text-align: center;">${row.BA}</td>
                        <td style="text-align: center;">${row.SLG}</td>
                        <td style="text-align: center;">${row.OPS}</td>
                        <td style="text-align: center; font-weight: bold;">${row.HR}</td>
                        <td style="text-align: center;">${row['2B']}</td>
                        <td style="text-align: center;">${row.XBH}</td>
                        <td style="text-align: center; font-weight: bold;">${row['HR/XBH']}</td>
                        <td style="text-align: center;">${row.BB}</td>
                        <td style="text-align: center;">${row.SO}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            html += '<div style="margin-top: 15px; padding: 10px; background: #ecf0f1; border-radius: 5px; font-size: 11px; color: #7f8c8d;">ç ”ç©¶æ¨¡å¼æ•¸æ“šåƒ…ä¾›é–‹ç™¼èª¿è©¦ä½¿ç”¨ï¼Œä¸ä»£è¡¨æœ€çµ‚éŠæˆ²è¡¨ç¾</div>';
            resultDiv.innerHTML = html;
        }
        
        // é—œé–‰POWåˆ†æçµæœ
        function closePOWAnalysis() {
            const resultDiv = document.getElementById('powAnalysisResults');
            if (resultDiv) {
                resultDiv.remove();
            }
        }
    </script>
</body>
</html>