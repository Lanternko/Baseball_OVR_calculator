<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>模組載入調試</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: #2c3e50; 
            color: white; 
            padding: 20px; 
        }
        .status {
            background: #34495e;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .success { background: #27ae60; }
        .error { background: #e74c3c; }
        .button {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>🔧 模組載入調試頁面</h1>
    
    <div id="status1" class="status">載入 constants.js...</div>
    <div id="status2" class="status">載入 probability_model.js...</div>
    <div id="status3" class="status">載入 simulation_engine.js...</div>
    <div id="status4" class="status">載入 ovr_calculator.js...</div>
    
    <button class="button" onclick="testBasicFunction()">測試基本功能</button>
    <button class="button" onclick="testSimulation()">測試模擬功能</button>
    <button class="button" onclick="testConversion()">測試轉換功能</button>
    
    <div id="results" style="margin-top: 20px;"></div>

    <script>
        console.log('開始載入模組...');
        
        // 檢查第一個模組
        console.log('準備載入 constants.js');
    </script>
    
    <script src="constants.js"></script>
    <script>
        const status1 = document.getElementById('status1');
        if (typeof LEAGUE_BENCHMARKS !== 'undefined') {
            status1.textContent = '✅ constants.js 載入成功';
            status1.className = 'status success';
            console.log('constants.js 載入成功');
        } else {
            status1.textContent = '❌ constants.js 載入失敗';
            status1.className = 'status error';
            console.error('constants.js 載入失敗');
        }
        
        console.log('準備載入 probability_model.js');
    </script>
    
    <script src="probability_model.js"></script>
    <script>
        const status2 = document.getElementById('status2');
        if (typeof getPAEventProbabilities !== 'undefined') {
            status2.textContent = '✅ probability_model.js 載入成功';
            status2.className = 'status success';
            console.log('probability_model.js 載入成功');
        } else {
            status2.textContent = '❌ probability_model.js 載入失敗';
            status2.className = 'status error';
            console.error('probability_model.js 載入失敗');
        }
        
        console.log('準備載入 simulation_engine.js');
    </script>
    
    <script src="simulation_engine.js"></script>
    <script>
        const status3 = document.getElementById('status3');
        if (typeof simulatePlayerStats !== 'undefined') {
            status3.textContent = '✅ simulation_engine.js 載入成功';
            status3.className = 'status success';
            console.log('simulation_engine.js 載入成功');
        } else {
            status3.textContent = '❌ simulation_engine.js 載入失敗';
            status3.className = 'status error';
            console.error('simulation_engine.js 載入失敗');
        }
        
        console.log('準備載入 ovr_calculator.js');
    </script>
    
    <script src="ovr_calculator.js"></script>
    <script>
        const status4 = document.getElementById('status4');
        if (typeof calculatePlayerGameAttributes !== 'undefined') {
            status4.textContent = '✅ ovr_calculator.js 載入成功';
            status4.className = 'status success';
            console.log('ovr_calculator.js 載入成功');
        } else {
            status4.textContent = '❌ ovr_calculator.js 載入失敗';
            status4.className = 'status error';
            console.error('ovr_calculator.js 載入失敗');
        }
        
        console.log('所有模組載入檢查完成');
        
        function testBasicFunction() {
            const results = document.getElementById('results');
            try {
                const benchmarks = LEAGUE_BENCHMARKS;
                results.innerHTML = `<p>✅ 基本功能測試成功</p><p>xSLG PR50: ${benchmarks.xSLG.pr50}</p>`;
            } catch (error) {
                results.innerHTML = `<p>❌ 基本功能測試失敗: ${error.message}</p>`;
            }
        }
        
        function testSimulation() {
            const results = document.getElementById('results');
            try {
                const simResult = simulatePlayerStats(70, 70, 70, 10, 600);
                results.innerHTML = `<p>✅ 模擬測試成功</p><p>BA: ${simResult.BA.toFixed(3)}, SLG: ${simResult.SLG.toFixed(3)}</p>`;
            } catch (error) {
                results.innerHTML = `<p>❌ 模擬測試失敗: ${error.message}</p>`;
            }
        }
        
        function testConversion() {
            const results = document.getElementById('results');
            try {
                const converted = calculatePlayerGameAttributes(0.280, 0.450, 0.340);
                results.innerHTML = `<p>✅ 轉換測試成功</p><p>POW: ${converted.POW.toFixed(0)}, HIT: ${converted.HIT.toFixed(0)}, EYE: ${converted.EYE.toFixed(0)}</p>`;
            } catch (error) {
                results.innerHTML = `<p>❌ 轉換測試失敗: ${error.message}</p>`;
            }
        }
    </script>
    
    <p><a href="research.html" style="color: #3498db;">← 返回研究模式</a></p>
</body>
</html>